---
import blogs from "../content/blogs.json"; 

type ColorKey = "blue" | "green" | "red";
const colorCycle: ColorKey[] = ["blue", "green", "red"];

const colorMap: Record<ColorKey, { border: string; text: string }> = {
  blue: {
    border: "border-t-blue-500",
    text: "text-blue-600",
  },
  green: {
    border: "border-t-green-500",
    text: "text-green-600",
  },
  red: {
    border: "border-t-red-500",
    text: "text-red-600",
  },
};

const getColorForIndex = (index: number): ColorKey => {
  return colorCycle[index % colorCycle.length];
};
---

<head>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Inter:wght@400;500&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
    }
    .font-jetbrains-mono {
      font-family: 'JetBrains Mono', monospace;
    }
  </style>
</head>

<section class="bg-gray-50 py-16">
  <div class="container mx-auto px-4">
    <header class="text-center mb-12">
      <h1 class="font-fira-code text-4xl md:text-5xl font-bold text-gray-800">
        <span class="text-blue-600">&lt;</span> BLOGS <span class="text-green-600">/</span> <span class="text-red-600">&gt;</span>
      </h1>
      <p class="font-jetbrains-mono text-gray-500 mt-3 text-sm">// Our latest thoughts and discoveries</p>
    </header>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
      {
        blogs.map((blog, index) => {
          const colorName = getColorForIndex(index);
          const borderColor = colorMap[colorName].border;
          const textColor = colorMap[colorName].text;

          return (
            <div class={`group bg-white border border-gray-200 border-t-4 ${borderColor} p-6 rounded-lg transition-all duration-300 hover:shadow-xl hover:-translate-y-2`}>
              <a href={blog.link} target="_blank" rel="noopener noreferrer">
                <h2 class="font-jetbrains-mono text-2xl font-bold text-gray-900">{blog.title}</h2>
                <p class="font-jetbrains-mono text-sm text-gray-500 mt-2 mb-4">// by {blog.author} â€¢ {blog.date}</p>
                <p class="text-gray-700 leading-relaxed">{blog.excerpt}</p>
                <span class={`font-jetbrains-mono ${textColor} mt-6 inline-block group-hover:underline`}>
                  read_more &rarr;
                </span>
              </a>
            </div>
          );
        })
      }
    </div>
  </div>
</section>
